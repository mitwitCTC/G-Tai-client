import{r as l,m as N,p as y,q as j,c as u,d as a,e as o,w as _,t as d,j as I,h as A,f as p,o as r,F as L,i as U,a as E}from"./index-BcdkWtUT.js";const R={class:"container mt-5"},Z={class:"d-flex justify-content-between align-items-center"},z={class:"d-flex justify-content-between"},G={key:0},H={key:1},J={key:2},K={key:3},O={class:"my-3"},W={__name:"TransferRecord",setup(P){const h=new Date,w=h.getFullYear(),n=l(String(h.getMonth()+1).padStart(2,"0")),s=l(`${w}-${n.value}`),g=l(""),Y={timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},b=l([]),S=N(()=>{if(c.value==1){const m=n.value==1?12:n.value-1;return[{label:`${n.value}月份餘額`,prop:"current_month_balance"},{label:"",prop:"equal_sign"},{label:`${m}月份餘額`,prop:"last_month_balance"},{label:"",prop:"plus_sign"},{label:`${n.value}月份匯款`,prop:"current_month_remittance_amount"},{label:"",prop:"minus_sign"},{label:`${n.value}月份加油小計`,prop:"current_month_fuel_total"}]}else if(c.value==2)return[{label:"擔保品",prop:"collateral_item"},{label:"擔保品價值",prop:"collateral_value"}];return""});function M(){c.value==1?b.value[0]={current_month_balance:-202212,last_month_balance:-88103,current_month_remittance_amount:1633e3,current_month_fuel_total:1747109}:c.value==2&&(b.value[0]={collateral_item:"現金",collateral_value:5e4})}const c=l("");function x(){c.value=sessionStorage.getItem("token")}y(()=>{x()});const C=l(2e5),k=l([]);function f(){console.log(s.value),V(),g.value=new Intl.DateTimeFormat("en-CA",Y).format(h).replace(",",""),M(),k.value=[{scheduled_date:"2024-08-25",checkoutTime:"2024-08-28",remittance_amount:5e5,note:"刷卡"},{scheduled_date:"2024-08-21",checkoutTime:"2024-08-24",remittance_amount:3e5,note:"刷卡"},{scheduled_date:"2024-08-15",checkoutTime:"2024-08-18",remittance_amount:39e4,note:"刷卡"},{scheduled_date:"2024-08-08",checkoutTime:"2024-08-11",remittance_amount:3e5,note:"刷卡"},{scheduled_date:"2024-08-06",checkoutTime:"2024-08-09",remittance_amount:6e5,note:"刷卡"},{scheduled_date:"2024-08-07",checkoutTime:"2024-08-10",remittance_amount:343e3,note:"刷卡"},{scheduled_date:"2024-08-05",checkoutTime:"2024-08-08",remittance_amount:8e5,note:"匯款"},{scheduled_date:"2024-08-02",checkoutTime:"2024-08-05",remittance_amount:49e4,note:"刷卡"},{scheduled_date:"2024-08-01",checkoutTime:"2024-08-04",remittance_amount:3e5,note:"刷卡"}]}function V(){s.value?n.value=s.value.split("-")[1]:n.value=""}j(s,()=>{f()}),y(()=>{f()});function v(m){return m.toLocaleString("en-US")}function $(){sessionStorage.removeItem("token"),A.push("/login")}return(m,t)=>{const D=p("router-link"),i=p("el-table-column"),T=p("el-table"),q=p("el-date-picker");return r(),u("div",R,[a("div",Z,[o(D,{to:"/"},{default:_(()=>t[1]||(t[1]=[a("button",{class:"btn btn-yellow mb-2"},"回首頁",-1)])),_:1}),a("button",{class:"btn btn-yellow",onClick:$},"登出")]),a("p",z,[t[2]||(t[2]=a("span",{class:"fw-bold"},"匯款紀錄查詢",-1)),a("span",null,"結帳時間："+d(g.value),1)]),t[3]||(t[3]=a("p",null,"*以下匯款明細，會因匯款入帳作業有 2 - 3 工作天的差異",-1)),o(T,{class:"mb-3",border:"",data:b.value},{default:_(()=>[(r(!0),u(L,null,U(S.value,(e,B)=>(r(),E(i,{align:"center","min-width":e.prop==="equal_sign"||e.prop==="plus_sign"||e.prop==="minus_sign"?"50":"130",key:B,label:e.label},{default:_(F=>[e.prop==="equal_sign"?(r(),u("span",G,"=")):e.prop==="plus_sign"?(r(),u("span",H,"+")):e.prop==="minus_sign"?(r(),u("span",J,"-")):(r(),u("span",K,d(v(F.row[e.prop])),1))]),_:2},1032,["min-width","label"]))),128))]),_:1},8,["data"]),t[4]||(t[4]=I(" 查詢帳戶月份： ")),o(q,{modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=e=>s.value=e),type:"month",format:"YYYY-MM","value-format":"YYYY-MM",placeholder:"請選擇查詢帳戶月份",onChange:f},null,8,["modelValue"]),a("p",O,"安全值金額："+d(v(C.value)),1),o(T,{data:k.value,stripe:"",height:"350"},{default:_(()=>[o(i,{align:"center",prop:"scheduled_date",label:"交易日"}),o(i,{align:"center",prop:"checkoutTime",label:"結帳日"}),o(i,{align:"center",prop:"remittance_amount",label:"匯款金額"},{default:_(({row:e})=>[a("span",null,d(v(e.remittance_amount)),1)]),_:1}),o(i,{align:"center",prop:"note",label:"交易方式"})]),_:1},8,["data"])])}}};export{W as default};
