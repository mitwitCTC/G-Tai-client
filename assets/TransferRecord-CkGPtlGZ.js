import{e as l,i as k,j as L,k as R,c as p,b as n,w as m,a as u,t as r,d as U,r as h,o as s,F as E,f as I,l as P}from"./index-ef-Utzjh.js";const Z={class:"container mt-5"},G={class:"d-flex justify-content-between"},H={key:0},J={key:1},K={key:2},O={key:3},Q={class:"my-3"},ee={__name:"TransferRecord",setup(W){const g=new Date,Y=g.getFullYear(),o=l(String(g.getMonth()+1).padStart(2,"0")),c=l(`${Y}-${o.value}`),T=l(""),S={timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},w=l([{current_month_balance:0,last_month_balance:0,current_month_remittance_amount:0,current_month_fuel_total:0}]),z=k(()=>{const a=o.value==1?12:o.value-1;return[{label:`${o.value}月份餘額`,prop:"current_month_balance"},{label:"",prop:"equal_sign"},{label:`${a}月份餘額`,prop:"last_month_balance"},{label:"",prop:"plus_sign"},{label:`${o.value}月份匯款`,prop:"current_month_remittance_amount"},{label:"",prop:"minus_sign"},{label:`${o.value}月份加油小計`,prop:"current_month_fuel_total"}]});function M(){w.value[0]={current_month_balance:-202212,last_month_balance:-88103,current_month_remittance_amount:1633e3,current_month_fuel_total:1747109}}const x=l(2e5),v=l([]);function b(){console.log(c.value),D(),T.value=new Intl.DateTimeFormat("en-CA",S).format(g).replace(",",""),M(),v.value=[{scheduled_date:"2024-08-07",checkoutTime:"2024-08-10",remittance_amount:343e3,note:"刷卡"},{scheduled_date:"2024-08-05",checkoutTime:"2024-08-08",remittance_amount:8e5,note:"匯款"},{scheduled_date:"2024-08-01",checkoutTime:"2024-08-04",remittance_amount:49e4,note:"刷卡"},{scheduled_date:"2024-07-25",checkoutTime:"2024-07-28",remittance_amount:5e5,note:"刷卡"},{scheduled_date:"2024-07-21",checkoutTime:"2024-07-24",remittance_amount:3e5,note:"刷卡"},{scheduled_date:"2024-07-15",checkoutTime:"2024-07-18",remittance_amount:39e4,note:"刷卡"},{scheduled_date:"2024-07-08",checkoutTime:"2024-07-11",remittance_amount:3e5,note:"刷卡"},{scheduled_date:"2024-07-05",checkoutTime:"2024-07-08",remittance_amount:6e5,note:"刷卡"},{scheduled_date:"2024-07-01",checkoutTime:"2024-07-04",remittance_amount:3e5,note:"刷卡"}]}function D(){c.value?o.value=c.value.split("-")[1]:o.value=""}L(c,()=>{b()}),R(()=>{b()});function y(a){return a.toLocaleString("en-US")}const i=l(5),_=l(1),f=k(()=>v.value.length),V=k(()=>{const a=(_.value-1)*i.value,e=a+i.value;return v.value.slice(a,e)});function $(a){i.value=a,_.value=1}function B(a){_.value=a}return(a,e)=>{const F=h("router-link"),d=h("el-table-column"),C=h("el-table"),N=h("el-date-picker"),q=h("el-pagination");return s(),p("div",Z,[n(F,{to:"/"},{default:m(()=>e[1]||(e[1]=[u("button",{class:"btn btn-outline-warning mb-2"},"回首頁",-1)])),_:1}),u("p",G,[e[2]||(e[2]=u("span",{class:"fw-bold"},"匯款紀錄查詢",-1)),u("span",null,"結帳時間："+r(T.value),1)]),e[3]||(e[3]=u("p",null,"*以下匯款明細，會因匯款入帳作業有 2 - 3 工作天的差異",-1)),n(C,{class:"mb-3",border:"",data:w.value},{default:m(()=>[(s(!0),p(E,null,I(z.value,(t,j)=>(s(),P(d,{align:"center","min-width":t.prop==="equal_sign"||t.prop==="plus_sign"||t.prop==="minus_sign"?"50":"130",key:j,label:t.label},{default:m(A=>[t.prop==="equal_sign"?(s(),p("span",H,"=")):t.prop==="plus_sign"?(s(),p("span",J,"+")):t.prop==="minus_sign"?(s(),p("span",K,"-")):(s(),p("span",O,r(A.row[t.prop]),1))]),_:2},1032,["min-width","label"]))),128))]),_:1},8,["data"]),e[4]||(e[4]=U(" 查詢帳戶月份： ")),n(N,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),type:"month",format:"YYYY-MM","value-format":"YYYY-MM",placeholder:"請選擇查詢帳戶月份",onChange:b},null,8,["modelValue"]),u("p",Q,"安全值金額："+r(y(x.value)),1),n(C,{data:V.value,stripe:"",height:"350"},{default:m(()=>[n(d,{align:"center",prop:"scheduled_date",label:"交易日"}),n(d,{align:"center",prop:"checkoutTime",label:"結帳日"}),n(d,{align:"center",prop:"remittance_amount",label:"匯款金額"},{default:m(({row:t})=>[u("span",null,r(y(t.remittance_amount)),1)]),_:1}),n(d,{align:"center",prop:"note",label:"交易方式"})]),_:1},8,["data"]),u("p",null," 顯示第 "+r((_.value-1)*i.value+1)+" 項 到 第 "+r(Math.min(_.value*i.value,f.value))+" 項 (共 "+r(f.value)+" 項) ",1),n(q,{background:"",layout:"sizes, prev, pager, next","page-sizes":[3,5,10],"page-size":i.value,"show-sizes":!1,total:f.value,"current-page":_.value,onSizeChange:$,onCurrentChange:B},null,8,["page-size","total","current-page"])])}}};export{ee as default};
