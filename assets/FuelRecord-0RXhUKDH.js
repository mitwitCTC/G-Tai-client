import{e as s,g as h,h as I,i as R,c as Y,b as n,w as c,a as t,t as a,d as U,j as $,r as m,o as k}from"./index-DVa2BqGe.js";const E={class:"container mt-5"},L={class:"d-flex justify-content-between"},P={key:0},Z={class:"text-primary fw-bold"},G={class:"text-primary fw-bold"},H={class:"text-primary fw-bold"},J={class:"text-primary fw-bold"},K={class:"d-flex justify-content-between align-items-center mb-2"},W={__name:"FuelRecord",setup(O){const b=new Date,q=b.getFullYear(),u=s(String(b.getMonth()+1).padStart(2,"0")),p=s(`${q}-${u.value}`),w=s(""),z={timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},y=s(0),A=s(0),C=s(0),x=s(0),g=s([]);function v(){console.log(p.value),M(),w.value=new Intl.DateTimeFormat("en-CA",z).format(b).replace(",",""),y.value=-202212,A.value=-88103,C.value=1633e3,x.value=1747109,g.value=[{team:"泰樂-採訪車",transaction_date:"2024-07-28",transaction_time:"10:56:00",plate:"AAA-1111",station:"蘆洲站",product_name:"92無鉛汽油",quantity:48.9,unit_price:31,discount:1,list_price_subtotal:1516,discount_subtotal:49,subtotal:1467,mileage:195528,fuel_consumption:0},{team:"泰樂-採訪車",transaction_date:"2024-07-27",transaction_time:"13:02:00",plate:"AAA-2222",station:"中壢服務區站",product_name:"超級柴油",quantity:169.81,unit_price:27,discount:1.3,list_price_subtotal:4585,discount_subtotal:221,subtotal:4364,mileage:209524,fuel_consumption:0},{team:"泰樂-採訪車",transaction_date:"2024-07-27",transaction_time:"11:52:00",plate:"AAA-3333",station:"重陽橋加油站",product_name:"超級柴油",quantity:83.7,unit_price:27,discount:1.3,list_price_subtotal:2260,discount_subtotal:109,subtotal:2151,mileage:40707,fuel_consumption:0},{team:"泰樂-工程車",transaction_date:"2024-07-31",transaction_time:"13:08:00",plate:"111-AA",station:"蘆洲三民路",product_name:"超級柴油",quantity:64.07,unit_price:27.3,discount:1.3,list_price_subtotal:1749,discount_subtotal:83,subtotal:1666,mileage:349068,fuel_consumption:0},{team:"泰樂-工程車",transaction_date:"2024-07-31",transaction_time:"02:34:00",plate:"222-AA",station:"蘆洲三民路",product_name:"超級柴油",quantity:37.26,unit_price:27.3,discount:1.3,list_price_subtotal:1017,discount_subtotal:48,subtotal:969,mileage:332373,fuel_consumption:0},{team:"泰樂-工程車",transaction_date:"2024-07-28",transaction_time:"02:42:00",plate:"333-AA",station:"蘆洲三民路",product_name:"超級柴油",quantity:25.92,unit_price:27,discount:1.3,list_price_subtotal:700,discount_subtotal:34,subtotal:666,mileage:332226,fuel_consumption:0},{team:"泰樂-工程車",transaction_date:"2024-07-30",transaction_time:"17:47:00",plate:"444-AA",station:"信誠",product_name:"超級柴油",quantity:160.99,unit_price:27.3,discount:1.3,list_price_subtotal:4395,discount_subtotal:209,subtotal:4186,mileage:123456,fuel_consumption:0}]}function M(){p.value?u.value=p.value.split("-")[1]:u.value=""}const S=h(()=>{const o=parseInt(u.value);return o===1?12:o-1});I(p,()=>{v()}),R(()=>{v()});function r(o){return o.toLocaleString("en-US")}const _=s(5),d=s(1),f=h(()=>g.value.length),V=h(()=>{const o=(d.value-1)*_.value,e=o+_.value;return g.value.slice(o,e)});function D(o){_.value=o,d.value=1}function N(o){d.value=o}return(o,e)=>{const F=m("router-link"),j=m("el-date-picker"),l=m("el-table-column"),B=m("el-table"),T=m("el-pagination");return k(),Y("div",E,[n(F,{to:"/"},{default:c(()=>e[1]||(e[1]=[t("button",{class:"btn btn-outline-warning mb-2"},"回首頁",-1)])),_:1}),t("p",L,[e[2]||(e[2]=t("span",{class:"fw-bold"},"加油紀錄",-1)),t("span",null,"最後資料更新時間："+a(w.value),1)]),e[8]||(e[8]=t("p",null,"*以下交易明細，會因匯款入帳作業有 2 - 3 工作天的差異",-1)),e[9]||(e[9]=U(" 查詢帳戶月份： ")),n(j,{modelValue:p.value,"onUpdate:modelValue":e[0]||(e[0]=i=>p.value=i),type:"month",format:"YYYY-MM","value-format":"YYYY-MM",placeholder:"請選擇查詢帳戶月份",onChange:v},null,8,["modelValue"]),u.value?(k(),Y("p",P,[e[3]||(e[3]=t("br",null,null,-1)),t("span",null,a(u.value)+"月份餘額：",1),t("span",Z,a(r(y.value)),1),e[4]||(e[4]=t("span",null,"=",-1)),t("span",null,a(S.value)+"月份餘額",1),t("span",G,a(r(A.value)),1),e[5]||(e[5]=t("span",null,"+",-1)),t("span",null,a(u.value)+"月份匯款",1),t("span",H,a(r(C.value)),1),e[6]||(e[6]=t("span",null,"-",-1)),t("span",null,a(u.value)+"月份加油小計",1),t("span",J,a(r(x.value)),1)])):$("",!0),t("div",K,[t("p",null,a(u.value)+"月份交易明細",1),e[7]||(e[7]=t("button",{class:"btn btn-warning"},"匯出",-1))]),n(B,{data:V.value,stripe:"",height:"350"},{default:c(()=>[n(l,{align:"center","min-width":"110",prop:"team",label:"使用單位(對帳單組別)"}),n(l,{align:"center","min-width":"110",sortable:"",prop:"transaction_date",label:"交易日期"}),n(l,{align:"center","min-width":"110",sortable:"",prop:"transaction_time",label:"交易時間"}),n(l,{align:"center","min-width":"110",prop:"plate",label:"車牌號碼"}),n(l,{align:"center","min-width":"130",prop:"station",label:"加油站"}),n(l,{align:"center","min-width":"110",prop:"product_name",label:"產品名稱"}),n(l,{align:"center","min-width":"110",prop:"quantity",label:"數量(公升)"}),n(l,{align:"center","min-width":"70",prop:"unit_price",label:"單價"}),n(l,{align:"center","min-width":"70",prop:"discount",label:"折讓"}),n(l,{align:"center","min-width":"110",prop:"list_price_subtotal",label:"牌價小計"},{default:c(({row:i})=>[t("span",null,a(r(i.list_price_subtotal)),1)]),_:1}),n(l,{align:"center","min-width":"110",prop:"discount_subtotal",label:"折讓小計"},{default:c(({row:i})=>[t("span",null,a(r(i.discount_subtotal)),1)]),_:1}),n(l,{align:"center","min-width":"110",prop:"subtotal",label:"售價小計"},{default:c(({row:i})=>[t("span",null,a(r(i.subtotal)),1)]),_:1}),n(l,{align:"center","min-width":"110",prop:"mileage",label:"里程數"},{default:c(({row:i})=>[t("span",null,a(r(i.mileage)),1)]),_:1}),n(l,{align:"center","min-width":"110",prop:"fuel_consumption",label:"油耗"},{default:c(({row:i})=>[t("span",null,a(r(i.fuel_consumption)),1)]),_:1})]),_:1},8,["data"]),t("p",null," 顯示第 "+a((d.value-1)*_.value+1)+" 項 到 第 "+a(Math.min(d.value*_.value,f.value))+" 項 (共 "+a(f.value)+" 項) ",1),n(T,{background:"",layout:"sizes, prev, pager, next","page-sizes":[3,5,10],"page-size":_.value,"show-sizes":!1,total:f.value,"current-page":d.value,onSizeChange:D,onCurrentChange:N},null,8,["page-size","total","current-page"])])}}};export{W as default};
