import{r as o,m as y,p as Y,q as E,c as p,d as n,e as l,w as h,t as r,j as P,h as Z,f as g,o as s,F as G,i as H,a as J}from"./index-CvS2nwuq.js";const K={class:"container mt-5"},O={class:"d-flex justify-content-between align-items-center"},Q={class:"d-flex justify-content-between"},W={key:0},X={key:1},ee={key:2},te={key:3},ae={class:"my-3"},le={__name:"TransferRecord",setup(ne){const v=new Date,z=v.getFullYear(),u=o(String(v.getMonth()+1).padStart(2,"0")),c=o(`${z}-${u.value}`),C=o(""),M={timeZone:"Asia/Taipei",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1},b=o([]),x=y(()=>{if(d.value==1){const a=u.value==1?12:u.value-1;return[{label:`${u.value}月份餘額`,prop:"current_month_balance"},{label:"",prop:"equal_sign"},{label:`${a}月份餘額`,prop:"last_month_balance"},{label:"",prop:"plus_sign"},{label:`${u.value}月份匯款`,prop:"current_month_remittance_amount"},{label:"",prop:"minus_sign"},{label:`${u.value}月份加油小計`,prop:"current_month_fuel_total"}]}else if(d.value==2)return[{label:"擔保品",prop:"collateral_item"},{label:"擔保品價值",prop:"collateral_value"}];return""});function D(){d.value==1?b.value[0]={current_month_balance:-202212,last_month_balance:-88103,current_month_remittance_amount:1633e3,current_month_fuel_total:1747109}:d.value==2&&(b.value[0]={collateral_item:"現金",collateral_value:5e4})}const d=o("");function V(){d.value=sessionStorage.getItem("token")}Y(()=>{V()});const $=o(2e5),f=o([]);function k(){console.log(c.value),q(),C.value=new Intl.DateTimeFormat("en-CA",M).format(v).replace(",",""),D(),f.value=[{scheduled_date:"2024-08-07",checkoutTime:"2024-08-10",remittance_amount:343e3,note:"刷卡"},{scheduled_date:"2024-08-05",checkoutTime:"2024-08-08",remittance_amount:8e5,note:"匯款"},{scheduled_date:"2024-08-01",checkoutTime:"2024-08-04",remittance_amount:49e4,note:"刷卡"},{scheduled_date:"2024-07-25",checkoutTime:"2024-07-28",remittance_amount:5e5,note:"刷卡"},{scheduled_date:"2024-07-21",checkoutTime:"2024-07-24",remittance_amount:3e5,note:"刷卡"},{scheduled_date:"2024-07-15",checkoutTime:"2024-07-18",remittance_amount:39e4,note:"刷卡"},{scheduled_date:"2024-07-08",checkoutTime:"2024-07-11",remittance_amount:3e5,note:"刷卡"},{scheduled_date:"2024-07-05",checkoutTime:"2024-07-08",remittance_amount:6e5,note:"刷卡"},{scheduled_date:"2024-07-01",checkoutTime:"2024-07-04",remittance_amount:3e5,note:"刷卡"}]}function q(){c.value?u.value=c.value.split("-")[1]:u.value=""}E(c,()=>{k()}),Y(()=>{k()});function T(a){return a.toLocaleString("en-US")}const i=o(5),_=o(1),w=y(()=>f.value.length),B=y(()=>{const a=(_.value-1)*i.value,e=a+i.value;return f.value.slice(a,e)});function F(a){i.value=a,_.value=1}function N(a){_.value=a}function j(){sessionStorage.removeItem("token"),Z.push("/login")}return(a,e)=>{const I=g("router-link"),m=g("el-table-column"),S=g("el-table"),A=g("el-date-picker"),L=g("el-pagination");return s(),p("div",K,[n("div",O,[l(I,{to:"/"},{default:h(()=>e[1]||(e[1]=[n("button",{class:"btn btn-outline-warning mb-2"},"回首頁",-1)])),_:1}),n("button",{class:"btn btn-outline-warning",onClick:j},"登出")]),n("p",Q,[e[2]||(e[2]=n("span",{class:"fw-bold"},"匯款紀錄查詢",-1)),n("span",null,"結帳時間："+r(C.value),1)]),e[3]||(e[3]=n("p",null,"*以下匯款明細，會因匯款入帳作業有 2 - 3 工作天的差異",-1)),l(S,{class:"mb-3",border:"",data:b.value},{default:h(()=>[(s(!0),p(G,null,H(x.value,(t,R)=>(s(),J(m,{align:"center","min-width":t.prop==="equal_sign"||t.prop==="plus_sign"||t.prop==="minus_sign"?"50":"130",key:R,label:t.label},{default:h(U=>[t.prop==="equal_sign"?(s(),p("span",W,"=")):t.prop==="plus_sign"?(s(),p("span",X,"+")):t.prop==="minus_sign"?(s(),p("span",ee,"-")):(s(),p("span",te,r(T(U.row[t.prop])),1))]),_:2},1032,["min-width","label"]))),128))]),_:1},8,["data"]),e[4]||(e[4]=P(" 查詢帳戶月份： ")),l(A,{modelValue:c.value,"onUpdate:modelValue":e[0]||(e[0]=t=>c.value=t),type:"month",format:"YYYY-MM","value-format":"YYYY-MM",placeholder:"請選擇查詢帳戶月份",onChange:k},null,8,["modelValue"]),n("p",ae,"安全值金額："+r(T($.value)),1),l(S,{data:B.value,stripe:"",height:"350"},{default:h(()=>[l(m,{align:"center",prop:"scheduled_date",label:"交易日"}),l(m,{align:"center",prop:"checkoutTime",label:"結帳日"}),l(m,{align:"center",prop:"remittance_amount",label:"匯款金額"},{default:h(({row:t})=>[n("span",null,r(T(t.remittance_amount)),1)]),_:1}),l(m,{align:"center",prop:"note",label:"交易方式"})]),_:1},8,["data"]),n("p",null," 顯示第 "+r((_.value-1)*i.value+1)+" 項 到 第 "+r(Math.min(_.value*i.value,w.value))+" 項 (共 "+r(w.value)+" 項) ",1),l(L,{background:"",layout:"sizes, prev, pager, next","page-sizes":[3,5,10],"page-size":i.value,"show-sizes":!1,total:w.value,"current-page":_.value,onSizeChange:F,onCurrentChange:N},null,8,["page-size","total","current-page"])])}}};export{le as default};
